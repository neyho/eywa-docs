**E**liminate **Y**our **W**aste **A**ctivities by  using set 
of services connected in opinionated way by levereging some
of edge web/mobile technologies.

Using: 


**[Data Modeling](./data)**

 - **exportable/transportable/deployable** data models
 - **on deploy GraphQL exposure** of generated API
 - **[Embeddable](https://github.com/neyho/eywa-examples/tree/master/clojure)**
 - **[Extendable](./graphql/extend)**
 - **[Plugable](./graphql/extend#hooks)**
 - **[Hackable](./advanced/cli#development)**

<div id="in-short"></div>


**[Identity Access Management](./iam)**

#### OAuth 2.1
- ‚úÖ Authorization Code Flow with PKCE
- ‚úÖ Client Credentials Flow
- ‚úÖ Device Code Flow
- ‚úÖ Refresh Token Support
- ‚úÖ Token Revocation 
- ‚úÖ JWT Access Tokens
- üöß Token Exchange RFC 8693
- üöß Conscent Screens & Prompt Handling
- üöß Dynamic Client Registration



#### OIDC
- ‚úÖ ID Token
- ‚úÖ UserInfo Endpoint
- üöß Authentication Context Class Reference
- üöß Authentication Method Reference
- ‚úÖ OIDC Discovery Endpoint
- ‚úÖ JWKS
- üöß Federation/External Identity Providers
  - üöß LDAP
  - üöß Google
  - üöß Github
  - üöß Facebook
  - üöß Microsoft...
- ‚úÖ Session Management
- ‚úÖ Client Logout
- üöß Backchannel Logout
- ‚úÖ Frontchannel Logout



## Why?


## Quickstart

#### Windows

```ps1
Invoke-WebRequest -Uri "https://s3.eu-central-1.amazonaws.com/eywa.public/eywa_cli/install_eywa_cli.ps1" -OutFile eywa_cli_install.ps1
./eywa_cli_install.ps1
rm eywa_cli_install.ps1
```

:::note Add following to PATH environment variable
```text
%USERPROFILE%\.eywa\bin
``` 
:::


#### Linux and MacOs
```bash
curl -s https://s3.eu-central-1.amazonaws.com/eywa.public/eywa_cli/install_eywa_cli.sh | bash
```


#### Install DB
Currently supported database is Postgres, although support for MySQL, SQLite, XTDB and others is on roadmap. 

Requirement is to have Postgres, so if you don't have installation i recommend using docker to download Postgres
image and afterwards run:

```text
docker run --name EYWA_DEV -p 5432:5432 -e POSTGRES_PASSWORD=password postgres
```

This will spin up container with port forwarding so that you can connect to database on localhost using
postgres user.

Following steps are enough to initialize EYWA.


EYWA will try to setup environment based on configuration file or environment variables.
EYWA requires credentials and DB endpoint data so it can connect to Postgres DB.
Configuration file can be generated by
running

```text
eywa server gen-config -j # for JSON configuration
eywa server gen-config -e # for EDN configuration
```

Both configuration formats are valid. For more information about how EYWA prioritizes
environment setup run

```text
eywa server gen-config
```

Since configuration file will contain confidential data in plaintext it is recommended
to add
```text
eywa.json
eywa.edn
```
to _.gitignore_ file in your project.


To see what options are available to manage configuration file use:
```text
eywa server config-schema
```
Lets get back on track, so we have running docker container and eywa cli application installed. As well
as local environment configured in configuration file and set as default environment for eywa cli.

Now we need to install eywa server jar file. Run
```text
eywa server -l

# And output should look something like this
‚ùØ eywa server -l          
List of available versions. '*' installed, '-' not installed

[-] 0.3.1
[-] 0.3.0
```

To install some version run
```text
eywa server -s 0.3.1
```

eywa server server is installed, now we need to initialize EYWA IAM and Datacraft. So we should run:

```text
eywa server init
```

If above command didn't throw any error that implies that initialization was successfull and DB is initialized.
So everything is ready to start EYWA server, except there is no user that can login to EYWA.
```text
eywa server super -s admin
```

Will prompt for password for admin password, and when supplied admin user will be created with target password.
Now run:

```text
eywa server start
```

And navigate to **https://my.eywaonline.com/eywa/** and login screen should be waiting for you. Use username and
password from previous step to login.

To track what is happening open log file at location __~/.eywa/logs/system.log__


If something went wrong or eywa server server isn't running as supposed to, run
```text
eywa server doctor
```


#### CLI
__eywa__ cli client can connect to EYWA server by running
```text
eywa connect http://localhost:8080
```
You will have to complete device code flow for target user and
after successfull connection client will use provided tokens to
interact with EYWA server.

Client also supports executing scripts through
```text
eywa run -c "py example.py"
```
This will encapsulate running script process and by using one of
supported client libraries script can interact with connected EYWA
server with authorized EYWA user. The part above

For now we support:
 * Python - [eywa-client](https://pypi.org/project/eywa-client/)
 ```pip install eywa-client```
 * Javascript - [eywa-client](https://www.npmjs.com/package/eywa-client)
 ```npm i eywa-client```

EYWA can be controlled through environment variables as well. To see
how, run:

```text
eywa server -h
```
